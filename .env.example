# Database
DATABASE_URL="postgresql://postgres:password@localhost:5432/metachat?schema=public"

# Redis
REDIS_URL="redis://localhost:6379"

# RabbitMQ
RABBITMQ_URL="amqp://guest:guest@localhost:5672"

# ============= LLM Configuration =============

# Default LLM provider: openai | anthropic | ollama
LLM_PROVIDER="openai"

# OpenAI Configuration
OPENAI_API_KEY="sk-proj-..."
OPENAI_MODEL="gpt-4o"                          # Options: gpt-4o, gpt-4o-mini
OPENAI_EMBEDDING_MODEL="text-embedding-3-small"
OPENAI_ORG_ID=""                               # Optional: Organization ID

# Anthropic Configuration (Claude)
ANTHROPIC_API_KEY="sk-ant-api03-..."
ANTHROPIC_MODEL="claude-3-5-sonnet-20241022"   # Options: claude-3-5-sonnet-20241022, claude-3-haiku-20240307

# Ollama Configuration (Local Models)
OLLAMA_BASE_URL="http://localhost:11434"
OLLAMA_MODEL="llama3.1:8b"                     # Options: llama3.1:8b, mistral, phi3, etc.

# LLM Parameters
LLM_TEMPERATURE="0.7"                          # 0-2, controls randomness
LLM_MAX_TOKENS="1000"                          # Maximum output tokens
LLM_TIMEOUT="30000"                            # Request timeout in milliseconds
LLM_MAX_RETRIES="3"                            # Max retry attempts on failure

# Embeddings (can be different from main LLM)
EMBEDDINGS_PROVIDER="openai"                   # openai | ollama
EMBEDDINGS_MODEL="text-embedding-3-small"

# API Keys Encryption
ENCRYPTION_KEY="your-32-character-secret-key"  # For encrypting tenant API keys in database

# WhatsApp Business Cloud API
# Per-tenant configuration stored in database

# Meta App (for Messenger)
# Per-tenant configuration stored in database

# Server
NODE_ENV="development"
PORT="3000"
API_URL="http://localhost:3000"

# Admin Authentication
ADMIN_JWT_SECRET="replace-with-random-64-character-secret"
ADMIN_JWT_TTL_SECONDS="900"                     # Short-lived admin session (15 minutes)
ADMIN_JWT_AUDIENCE="admin"
ADMIN_JWT_ISSUER="meta-chat-api"
ADMIN_JWT_DEFAULT_SCOPE="admin:read"
ADMIN_KEY_PEPPER="optional-extra-pepper"        # Optional server-side pepper for admin keys

# Legacy global API key (deprecated in favor of admin keys)
GLOBAL_API_KEY="your-secure-random-key"

# File Storage
STORAGE_PATH="./storage"

# Webhooks
WEBHOOK_RETRY_MAX_ATTEMPTS="5"
WEBHOOK_RETRY_INITIAL_DELAY_MS="1000"

# Health Check
HEALTH_CHECK_CACHE_TTL_MS="3000"  # Cache health status for 3 seconds

# Rate Limiting
RATE_LIMIT_WINDOW_MS="60000"
RATE_LIMIT_MAX_REQUESTS="100"

# Logging
LOG_LEVEL="info"

# Cost Tracking
ENABLE_COST_TRACKING="true"
COST_ALERT_THRESHOLD="100"                     # Alert if daily cost exceeds this (USD)

# ============= Stripe Configuration =============
# Stripe payment processing
STRIPE_SECRET_KEY="sk_test_..."                # Get from https://dashboard.stripe.com/apikeys
STRIPE_WEBHOOK_SECRET="whsec_..."              # Get from https://dashboard.stripe.com/webhooks (required for webhook signature verification)

# To get your webhook secret:
# 1. Go to https://dashboard.stripe.com/webhooks
# 2. Click "+ Add endpoint"
# 3. Enter your webhook URL: https://yourdomain.com/api/webhooks/stripe
# 4. Select events to listen for (checkout.session.completed, invoice.paid, etc.)
# 5. Copy the "Signing secret" (starts with whsec_)
